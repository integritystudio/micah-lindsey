---
# Only the main Sass file needs front matter (the dashes are enough)
---

@charset "utf-8";
@import "variables";
@import "minimal-mistakes";

/* Clean, minimal styling inspired by reference design */

/* GLOBAL OVERRIDES - Only what differs from theme defaults */
body {
  font-size: 16px;
  line-height: $line-height-base;
}

/* HEADER - Compact cover images */
.page-hero {
  height: $header-image-height;
  padding-bottom: 0;
  margin-bottom: $spacing-xl;

  .page-hero-image,
  img {
    width: 100%;
    height: $header-image-height;
    object-fit: cover;
  }

  .page-hero-caption {
    display: none;
  }
}

.page-hero-overlay {
  position: relative;
  height: $header-image-height;
  padding-bottom: 0;
  margin-bottom: $spacing-xl;

  .page-hero-content {
    display: none;
  }
}

/* HEADER BANNER - Red academic banner like target site */
.masthead {
  border-bottom: .5px solid $border-light;
  padding: $spacing-lg 0 1.25em;  /* Balanced from 2em 0 1em */
}

.greedy-nav {
  font-family: $heading-font;
  text-transform: uppercase;
  text-align: center;
  background: transparent;
  align-items: center;
  margin: 0 auto;
  display: flex;

  .site-title {
    width: 16.6666666667%;
    margin-right: $grid-col-width;
    margin-left: 6%;  /* Increased from $grid-col-width to center better */
    text-align: center;
  }

  a {
    color: $text-color;
    letter-spacing: 0.05em;  /* Spacing for uppercase */
    transition: $link-transition;

    &:hover {
      color: $link-hover;
    }
  }

  .nav-links {
    display: flex;
    flex-wrap: wrap;
    margin-right: $grid-col-width;
    margin-left: $grid-col-width;

    a {
      font-weight: $font-weight-bold;
      margin-right: $grid-col-width;
      white-space: nowrap;

      &:hover {
        border-bottom-color: rgba($text-color, 0.6);
      }
    }
  }
}

/* MAIN CONTENT - Constrained width and minimal padding */
/* Use html body prefix for specificity (0,0,3) to beat theme's clearfix (0,0,1) */
html body #page-wrapper {
  max-width: $content-max-width;
  margin: 0 auto;
  padding: 0.25rem;

  // At desktop widths, don't clear the sidebar float so content appears beside it
  @media (min-width: $large) {
    clear: none;
    margin-top: 0;
  }
}

// Fix: Theme's clearfix mixin adds clear:both to #main, pushing it below the sidebar
// Override this at large screens so main content sits beside the sidebar
html body #main {
  @media (min-width: $large) {
    clear: none;
  }
}

.initial-content {
  padding-top: 0;
  margin-top: 0;
}

/* SIDEBAR - Academic profile layout matching target */
/* Use body .sidebar prefix for specificity (0,1,1) to beat theme's (0,1,0) */
body .sidebar {
  padding: 0.75em 1em 1em;  /* Reduced from 2em for tighter composition */

  // Only apply flex centering on mobile - don't interfere with desktop float layout
  @media (max-width: $large - 0.0625em) {
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  // Remove clear on desktop so sidebar and content float side-by-side
  // Add left padding to center author profile in sidebar space
  @media (min-width: $large) {
    clear: none;
    padding-left: $spacing-lg;  /* Push content toward center of sidebar area */
  }

  text-align: center;

  // Override theme's table-cell display for proper centering
  // Specificity: body .sidebar .author__content (0,3,1) beats theme's .author__content (0,1,0)
  .author__content {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    width: 100%;
  }

  // Fix avatar centering - override theme's table-cell display
  .author__avatar {
    display: block;
    margin: 0 auto $spacing-md;
  }

  .author__name,
  .author__bio,
  .author__urls-wrapper {
    text-align: center;
  }

  .author-avatar img {
    width: $avatar-size-lg;
    height: $avatar-size-lg;
    border-radius: $border-radius-circle;
    object-fit: cover;
    margin-bottom: $spacing-md;  /* Explicit spacing below avatar */
  }

  .author-name {
    font-size: 1.75em;  /* Reduced from 2em for refined hierarchy */
    font-weight: $font-weight-semibold;   /* Reduced from bold (700) to semibold */
    font-family: $heading-font;
    letter-spacing: 0.02em;  /* Added for elegance */
    margin-bottom: 0;
  }

  .author-bio {
    font-style: italic;
    color: $wcag-text-dark;  /* WCAG AA contrast (7.0:1 on white) */
    font-size: 1em;  /* Reduced from 1.1em for better hierarchy */
    line-height: $line-height-tight;  /* Increased from 1.4 for readability */
    margin-top: 0.75em;  /* Explicit top margin */
    margin-bottom: $spacing-lg;  /* Explicit bottom margin */
  }

  .author__urls-wrapper,
  .author-urls-wrapper {
    margin-top: $spacing-xl-em;  /* Clear separation from bio */
    margin-bottom: $spacing-lg;
    padding-top: $spacing-md;
    border-top: 1px solid $border-subtle;  /* Subtle visual divider */
    width: 100%;
    text-align: center;  /* Center the Follow button */
    overflow: visible;  /* Fix truncation */

    > button,
    > button.btn {
      display: inline-block;  /* Override theme's block display */
      margin-bottom: $spacing-md;
    }
  }

  .author-urls,
  .author__urls {
    margin-top: 0;
    text-align: center;
    overflow: visible;  /* Fix truncation */

    li {
      display: block;
      margin-bottom: 0.75em;  /* Increased from 0.5em */
      @include text-wrap-normal;  /* Fix truncation with mixin */

      &:last-child {
        margin-bottom: 0;
      }

      // Location styling
      &[itemprop="homeLocation"] {
        font-size: $font-size-medium;
        color: $wcag-text-muted;  // WCAG AA compliant (6.42:1 contrast ratio)
        margin-bottom: $spacing-lg;
        display: block;
        text-align: center;
        @include text-wrap-normal;

        i {
          font-size: 1.1em;
          color: $academic-red;
          margin-right: $spacing-sm;
        }
      }
    }

    // Link styling with specificity - body .sidebar .author__urls li a (0,4,1)
    li a {
      font-size: $font-size-large;  /* Slightly smaller links */
      color: $link-primary;
      text-decoration: none;
      padding: 0.4em 0.6em;  /* Increased padding */
      border-radius: $border-radius-small;
      transition: $hover-transition;
      display: inline-block;  /* Allow padding to work properly */
      @include text-wrap-normal;

      &:hover {
        color: $white;
        background: $academic-red;
        transform: translateX(2px);  /* Subtle hover effect */
      }
    }
  }

  .btn {
    background: $bg-light;
    @include border-medium;
    color: $wcag-text-dark;  /* WCAG AA contrast (6.3:1 on #f8f9fa background) */
    font-size: $font-size-large;
    padding: 0.6em $spacing-md;
    display: block;
    margin-bottom: $spacing-md;

    &:hover {
      background: $bg-lighter;
      color: $text-color;
    }
  }
}

/* CONTENT HEADINGS - Enhanced for long-form reading */
.page-content {
  font-family: $base-font;
  font-size: 16px;
  line-height: $line-height-base;

  h1 {
    font-size: 2em;
    color: $content-text;
    @include border-bottom-accent(3px, $accent-blue);
    padding-bottom: $spacing-xs-px;
  }

  h2 {
    font-size: $font-size-heading-2;
    color: $gray-medium;
    font-weight: $font-weight-medium;
    @include border-light-bottom;
  }

  p {
    margin-bottom: $spacing-lg;
    color: $content-text;
  }

  a {
    color: $link-hover;  /* #06c - WCAG AA compliant (5.9:1 contrast on white) */
    text-decoration: none;
    border-bottom: 1px dotted $link-hover;

    &:hover {
      border-bottom: 1px solid $link-hover;
      color: $text-color;
    }
  }

  blockquote {
    border-left: 3px solid $accent-blue;
    padding-left: $spacing-lg;
    font-style: italic;
    margin: $spacing-xl 0;
    color: $gray-darker;
    background: $bg-light;
    padding: $spacing-xl;
    border-radius: $border-radius * 2;
    text-align: center;
  }

  /* Special styling for emotional breaks and contemplative spacing */
  p + p {
    margin-top: 1.75em;
  }
}

/* CODE BLOCKS - Light theme matching site aesthetic */
/* Use body prefix for specificity (0,1,1) to beat theme's (0,1,0) */
/* NOTE: Syntax colors now come from base16 variable overrides in _sass/variables.scss */
body div.highlighter-rouge,
body figure.highlight {
  background: $code-bg;
  border: 1px solid $border-subtle;
  border-radius: $border-radius;
  padding: $spacing-md;
  margin: $spacing-lg 0;
  overflow-x: auto;
  font-family: $code-font;
  font-size: $font-size-medium;
  line-height: $line-height-tight;

  code {
    background: transparent;
    color: $text-color;
    font-size: inherit;
  }

  pre,
  pre.highlight {
    margin: 0;
    background: transparent;
    border: none;
  }
}

/* Additional syntax refinements beyond base16 defaults */
/* These target specific tokens that need different colors than base16 provides */
body .highlight {
  // Generic classes not covered by base16
  .gr { color: $syntax-error; }        /* Generic.Error */
  .gh { color: $syntax-header; }       /* Generic.Heading */
  .gi { color: $syntax-inserted; }     /* Generic.Inserted */
  .go { color: $syntax-output; }       /* Generic.Output */
  .gp { color: $syntax-prompt; }       /* Generic.Prompt */
  .gu { color: $syntax-deleted; }      /* Generic.Subheading */
  .gt { color: $syntax-traceback; }    /* Generic.Traceback */
  .w { color: $syntax-whitespace; }    /* Text.Whitespace */
}

/* INLINE CODE - Compact, subtle styling */
/* Use body prefix and attribute selector for specificity */
body p code,
body li code,
body td code,
body :not(pre) > code {
  padding: 0.1em 0.3em;
  margin: 0;
  font-size: $font-size-small;
  background-color: $code-bg-inline;
  border: 1px solid $border-subtle;
  border-radius: $border-radius-small;
  font-family: $code-font;
  white-space: nowrap;

  /* Remove excessive spacing before/after */
  &::before,
  &::after {
    content: none;
    letter-spacing: normal;
  }
}

/* LANGUAGE PLAINTEXT - Remove all padding */
body .language-plaintext.highlighter-rouge {
  padding: 0;
  margin: 0;

  code {
    padding: 0;
  }
}

/* TABLES - Clean, readable styling */
table {
  width: 100%;
  border-collapse: collapse;
  margin: $spacing-xl 0;
  font-size: $font-size-large;

  thead {
    background: $code-bg;
    @include border-bottom-accent(2px, $border-medium);
  }

  th {
    padding: $spacing-md-rem;
    text-align: left;
    font-weight: $font-weight-semibold;
    color: $text-color;
    font-size: $font-size-large;
  }

  td {
    padding: $spacing-md-rem;
    @include border-light-bottom;
    color: $gray-darker;
  }

  tbody tr {
    &:hover {
      background: $bg-light;
    }

    &:last-child td {
      border-bottom: 1px solid $border-medium;
    }
  }
}

/* STATUS INDICATORS */
.status-pass { @include status-indicator("✓ ", $status-pass); }
.status-fail { @include status-indicator("✗ ", $status-fail); }
.status-warning { @include status-indicator("⚠ ", $status-warning); }

/* INFO BOXES - using notice-box mixin from variables.scss */
.notice-info {
  @include notice-box($notice-info-bg, $link-hover, $link-hover);
  font-size: $font-size-large;
}

.notice-warning {
  @include notice-box($notice-warning-bg, $status-warning, $status-warning);
}

/* ARCHIVE AND PAGE LAYOUT FIXES */
/* Use body prefix for specificity */
body .page__inner-wrap,
body .archive {
  margin-top: 0;  /* Remove excessive top spacing */
}

/* ARCHIVE LISTINGS - Academic post list matching target */
/* Use double-class specificity for archive links */
body .archive .list__item,
body .archive .archive__item,
body .list__item,
body .archive__item {

  &:last-child {
    border-bottom: none;
  }

  .archive__item-title {
    font-size: $font-size-heading-2;
    font-weight: $font-weight-bold;
    margin-bottom: $spacing-sm-rem;
    color: $gray-medium;
    font-family: $heading-font;

    a {
      color: $link-primary;
      text-decoration: none;
      border-bottom: none;
      transition: $link-transition;

      &:hover {
        color: $link-primary-hover;
      }
    }
  }

  .archive__item-excerpt {
    color: $gray-darker;
    font-size: 1em;
    line-height: $line-height-relaxed;
    margin-bottom: $spacing-sm-rem;
    font-style: italic;
  }

  .archive__item-date {
    display: block;
    color: $gray-lighter;
    font-size: $font-size-medium;
    margin-bottom: $spacing-sm-rem;
    font-style: italic;
  }
}

/* Recent Posts heading styling */
.page__content h2 {
  color: $academic-red;
  font-family: $heading-font;
  font-size: 1.8em;
  font-style: bold;
  @include border-bottom-accent(2px, $academic-red);
}

/* Remove grid from card elements */
body .card .grid {
  display: block;
}

.card .grid > div {
  margin-bottom: $spacing-md;
}

/* SINGLE POST - Enhanced typography */
.single {
  .page-title {
    font-size: 2.2em;
    font-weight: $font-weight-bold;
    margin-bottom: $spacing-md;
    line-height: 1.2;
  }

  .page-meta {
    color: $gray-lighter;
    font-size: $font-size-medium;
    margin-bottom: $spacing-xl;
    @include border-light-bottom;
  }
}

/* GLOBAL LINK OVERRIDES - Clean black text */
/* Use html body a for specificity (0,0,3) to beat theme's a (0,0,1) */
html body a {
  color: $text-color;  /* WCAG AA contrast (7.7:1 on white) */
  text-decoration: none;

  &:hover {
    color: $link-hover;
  }
}

/* Masthead links - dark text on light background */
html body .greedy-nav a,
html body .greedy-nav .site-title {
  color: $text-color;

  &:hover {
    color: $link-hover;
  }
}

/* FOOTER - Clean styling (WCAG colors defined in _footer.scss) */
.page-footer {
  @include border-light-top;
  padding: $spacing-xl 0;
  text-align: center;
}

/* SOCIAL SHARING */
.page-share {
  @include border-light-top;
  padding-top: $spacing-lg;
  margin-top: $spacing-xl;

  .btn {
    margin-right: $spacing-sm-rem;
    margin-bottom: $spacing-sm-rem;
  }
}

/* RESPONSIVE DESIGN */
@media (max-width: $large-wide) {
  #page-wrapper {
    padding: 0.25rem;
  }

  .sidebar {
    padding: 0.25rem;
    text-align: center;

    .author-avatar img {
      width: $avatar-size-md;
      height: $avatar-size-md;
    }
  }

  .page-content {
    padding: 0 0.25rem;
  }
}

@media (max-width: $medium) {
  .greedy-nav {
    padding: 0.1rem 0.5rem;
    flex-direction: column;
    align-items: flex-start;

    .site-title {
      margin-right: 0;
      margin-bottom: 0.1rem;
      font-size: 1.2em;
    }

    .visible-links {
      gap: 0.02rem;

      a {
        padding: 0.1rem 0.2rem;
        font-size: $font-size-medium;
        font-weight: $font-weight-black;
      }
    }
  }

  .single .page-title {
    font-size: 1.8em;
  }

  .archive .list__item .archive__item-title {
    font-size: 1.2em;
  }

  .page-content {
    font-size: $font-size-mobile;
    line-height: $line-height-relaxed;
    padding: $spacing-md;

    p {
      margin-bottom: 1.25em;
    }

    p + p {
      margin-top: $spacing-lg;
    }
  }
}

/* Breadcrumb separator fix for accessibility */
.breadcrumbs li:not(:last-child)::after {
  content: " / ";
  padding: 0 0.25em;
}